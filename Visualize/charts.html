<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>[231124029218]_[Lê Hoài Nam]_[49K29.2]</title>
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <header>
    <h1>[231124029218]_[Lê Hoài Nam]_[49K29.2]</h1>
    <nav class="q-nav">
      <ul>
        <li><a href="#" data-q="1">Q1</a></li>
        <li><a href="#" data-q="2">Q2</a></li>
        <li><a href="#" data-q="3">Q3</a></li>
        <li><a href="#" data-q="4">Q4</a></li>
        <li><a href="#" data-q="5">Q5</a></li>
        <li><a href="#" data-q="6">Q6</a></li>
        <li><a href="#" data-q="7">Q7</a></li>
        <li><a href="#" data-q="8">Q8</a></li>
        <li><a href="#" data-q="9">Q9</a></li>
        <li><a href="#" data-q="10">Q10</a></li>
        <li><a href="#" data-q="11">Q11</a></li>
        <li><a href="#" data-q="12">Q12</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <div id="chart-container" class="chart-container"></div>
  </main>

  <script>
    const container = document.getElementById("chart-container");
    const links = document.querySelectorAll(".q-nav a");

    // reusable loader for a question
    function loadQ(q) {
      // Clear chart container
      container.innerHTML = "";

      // Remove any existing dynamic script for this q (avoid duplicates)
      const existing = document.querySelector(`script[data-q="${q}"]`);
      if (existing) existing.remove();

      const script = document.createElement("script");
      script.type = "module";
      script.dataset.q = q;
      // Cache-bust so module top-level code re-runs when reopening the same Q
      script.src = `js/q${q}.js?v=${Date.now()}`;
      document.head.appendChild(script);

      // mark active link
      links.forEach(l => l.classList.remove("active"));
      const active = document.querySelector(`.q-nav a[data-q="${q}"]`);
      if (active) active.classList.add("active");
    }

    links.forEach(link => {
      link.addEventListener("click", e => {
        e.preventDefault();
        loadQ(link.dataset.q);
      });
    });

    // Load Q1 by default on page load
    loadQ("1");
  </script>
</body>
</html>